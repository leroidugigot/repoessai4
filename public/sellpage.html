<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Matériel de Secourisme Pro</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <link rel="stylesheet" href="./css/output.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <style>
      /* Variables et styles de base */
      :root {
        --primary: #4caf50;
        --primary-dark: #3d8b40;
        --secondary: #2196f3;
        --secondary-dark: #1976d2;
        --accent: #ff5733;
        --success: #4caf50;
        --warning: #ff9800;
        --danger: #f44336;
        --gray-100: #f5f5f5;
        --gray-200: #eeeeee;
        --gray-300: #e0e0e0;
        --gray-400: #bdbdbd;
        --gray-500: #9e9e9e;
        --gray-600: #757575;
        --gray-700: #616161;
        --gray-800: #424242;
        --gray-900: #212121;
        --transition: all 0.3s ease;
        --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.12);
        --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
        --radius: 8px;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: system-ui, -apple-system, sans-serif;
        line-height: 1.5;
        color: var(--gray-900);
        background-color: var(--gray-100);
        margin-top: 64px;
      }

      /* Header et Navigation */
      .header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 64px;
        background: linear-gradient(to right, var(--gray-900), var(--gray-800));
        color: white;
        z-index: 1000;
      }

      .nav-container {
        max-width: 1280px;
        margin: 0 auto;
        padding: 0 1rem;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .logo {
        height: 48px;
        width: auto;
      }

      .nav-links {
        display: flex;
        gap: 2rem;
        align-items: center;
      }

      .nav-links a {
        color: white;
        text-decoration: none;
        font-weight: 500;
        transition: var(--transition);
        padding: 0.5rem 1rem;
        border-radius: var(--radius);
      }

      .nav-links a:hover {
        background-color: rgba(255, 255, 255, 0.1);
      }

      .nav-buttons {
        display: flex;
        gap: 1rem;
        align-items: center;
      }

      .btn {
        padding: 0.5rem 1rem;
        border-radius: var(--radius);
        border: none;
        cursor: pointer;
        font-weight: 500;
        transition: var(--transition);
      }

      .btn-primary {
        background-color: var(--primary);
        color: white;
      }

      .btn-primary:hover {
        background-color: var(--primary-dark);
      }

      .btn-secondary {
        background-color: var(--secondary);
        color: white;
      }

      .btn-secondary:hover {
        background-color: var(--secondary-dark);
      }

      .btn-outline {
        background-color: transparent;
        border: 2px solid white;
        color: white;
      }

      .btn-outline:hover {
        background-color: white;
        color: var(--gray-900);
      }

      /* Menu mobile */
      .mobile-menu-btn {
        display: none;
        background: none;
        border: none;
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
      }

      .mobile-menu {
        display: none;
        position: fixed;
        top: 64px;
        left: 0;
        right: 0;
        background-color: var(--gray-900);
        padding: 1rem;
      }

      .mobile-menu.active {
        display: block;
      }

      /* Bannière promotionnelle */
      .promo-banner {
        background: linear-gradient(45deg, var(--secondary), var(--primary));
        color: white;
        padding: 1rem;
        text-align: center;
      }

      .promo-banner-content {
        max-width: 1280px;
        margin: 0 auto;
      }

      /* Filtres */
      .filters {
        background-color: white;
        padding: 1rem;
        margin: 1rem auto;
        max-width: 1280px;
        border-radius: var(--radius);
        box-shadow: var(--shadow);
      }

      .search-container {
        position: relative;
        max-width: 600px;
        margin: 0 auto 1rem;
      }

      .search-input {
        width: 100%;
        padding: 0.75rem 1rem 0.75rem 2.5rem;
        border: 2px solid var(--gray-200);
        border-radius: var(--radius);
        font-size: 1rem;
      }

      .search-icon {
        position: absolute;
        left: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: var(--gray-500);
      }

      .filter-buttons {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
        justify-content: center;
      }

      .filter-btn {
        padding: 0.5rem 1rem;
        border: none;
        background-color: var(--gray-200);
        border-radius: var(--radius);
        cursor: pointer;
        transition: var(--transition);
      }

      .filter-btn.active {
        background-color: var(--secondary);
        color: white;
      }

      /* Grille de produits */
      .products-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 2rem;
        max-width: 1280px;
        margin: 2rem auto;
        padding: 0 1rem;
      }

      .product-card {
        background-color: white;
        border-radius: var(--radius);
        overflow: hidden;
        box-shadow: var(--shadow);
        transition: var(--transition);
        position: relative;
      }

      .product-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-lg);
      }

      .product-image {
        position: relative;
        padding-top: 75%; /* Ratio 4:3 */
      }

      .product-image img {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .product-badge {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background-color: var(--accent);
        color: white;
        padding: 0.25rem 0.5rem;
        border-radius: var(--radius);
        font-size: 0.875rem;
        font-weight: 500;
      }

      .product-content {
        padding: 1rem;
      }

      .product-title {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
      }

      .product-rating {
        display: flex;
        align-items: center;
        gap: 0.25rem;
        margin-bottom: 0.5rem;
      }

      .star {
        color: #ffd700;
      }

      .product-price {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin: 1rem 0;
      }

      .current-price {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--primary);
      }

      .old-price {
        text-decoration: line-through;
        color: var(--gray-500);
      }

      .product-actions {
        display: flex;
        gap: 0.5rem;
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1100;
      }

      .modal.active {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .modal-content {
        background-color: white;
        border-radius: var(--radius);
        max-width: 900px;
        width: 90%;
        max-height: 90vh;
        overflow-y: auto;
      }

      .modal-header {
        padding: 1rem;
        border-bottom: 1px solid var(--gray-200);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .modal-close {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: var(--gray-500);
      }

      .modal-body {
        padding: 2rem;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
      }

      /* Toast Notifications */
      .toast-container {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        z-index: 1200;
      }

      .toast {
        background-color: white;
        border-radius: var(--radius);
        padding: 1rem;
        margin: 0.5rem;
        box-shadow: var(--shadow);
        display: flex;
        align-items: center;
        gap: 0.5rem;
        transform: translateX(100%);
        opacity: 0;
        transition: var(--transition);
      }

      .toast.show {
        transform: translateX(0);
        opacity: 1;
      }

      /* Responsive */
      @media (max-width: 768px) {
        .nav-links,
        .nav-buttons {
          display: none;
        }

        .mobile-menu-btn {
          display: block;
        }

        .modal-body {
          grid-template-columns: 1fr;
        }
      }
      .cart-button-fixed {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        z-index: 1000;
      }

      .cart-btn {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        position: relative;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .cart-badge {
        position: absolute;
        top: -8px;
        right: -8px;
        background-color: var(--accent);
        color: white;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        font-size: 0.875rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .cart-sidebar {
        position: fixed;
        top: 0;
        right: -400px;
        width: 400px;
        height: 100vh;
        background-color: white;
        box-shadow: -4px 0 12px rgba(0, 0, 0, 0.1);
        z-index: 1100;
        transition: right 0.3s ease;
      }

      .cart-sidebar.active {
        right: 0;
      }

      .cart-header {
        padding: 1rem;
        border-bottom: 1px solid var(--gray-200);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .btn-close {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: var(--gray-600);
      }

      .cart-items {
        padding: 1rem;
        overflow-y: auto;
        max-height: calc(100vh - 180px);
      }

      .cart-item {
        display: grid;
        grid-template-columns: auto 1fr auto;
        gap: 1rem;
        padding: 1rem;
        border-bottom: 1px solid var(--gray-200);
      }

      .cart-item-image {
        width: 80px;
        height: 80px;
        border-radius: var(--radius);
        overflow: hidden;
      }

      .cart-item-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .cart-item-info {
        display: flex;
        flex-direction: column;
      }

      .cart-item-title {
        font-weight: 500;
      }

      .cart-item-price {
        color: var(--primary);
        font-weight: 600;
      }

      .cart-item-quantity {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .cart-item-remove {
        color: var(--danger);
        cursor: pointer;
      }

      .cart-footer {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        padding: 1rem;
        border-top: 1px solid var(--gray-200);
        background-color: white;
      }

      .cart-total {
        display: flex;
        justify-content: space-between;
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 1rem;
      }

      .btn-checkout {
        width: 100%;
        padding: 1rem;
      }

      @media (max-width: 768px) {
        .cart-sidebar {
          width: 100%;
          right: -100%;
        }
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="fixed left-0 right-0 top-0 z-50 bg-black">
      <nav class="flex h-16 items-center justify-between p-0">
        <div class="m-0 flex h-full items-center p-0">
          <a href="index.html"
            ><img src="./images/img/logo.png" alt="Logo" class="m-0 h-24 p-0"
          /></a>
        </div>

        <div class="hidden h-11 w-auto flex-row justify-between gap-4 md:flex">
          <button
            id="toggleModalBtn"
            class="rounded-lg bg-blue-500 px-4 py-2 text-white shadow-md hover:bg-blue-600 focus:outline-none"
          >
            Formations <i class="fas fa-chevron-down"></i>
          </button>
          <a
            href="enseigner.html"
            class="text-15 change-color-on-scroll underline-animation flex h-11 w-auto items-center px-1 font-bold"
            >Devenir Formateur</a
          >
          <a
            href="chat.html"
            class="text-15 change-color-on-scroll underline-animation flex h-11 w-auto items-center px-1 font-bold"
            >Notre Communauté</a
          >
          <a
            href="sellpage.html"
            class="text-15 change-color-on-scroll underline-animation flex h-11 w-auto items-center px-1 font-bold"
          >
            Mon sac de secouriste
            <i class="fa-solid fa-heart-pulse fa-beat ml-4"></i>
          </a>
        </div>

        <div class="hidden flex-row items-center gap-2 px-1 md:flex">
          <a
            href="#"
            class="change-color-on-scroll underline-animation flex h-7 w-24 items-center justify-center rounded-2xl"
            onclick="handleClickConnexion()"
            >Connexion</a
          >
          <a
            href="#"
            class="z-40 flex h-7 w-28 items-center justify-center rounded-3xl bg-blue-500 px-2 text-white hover:scale-125 hover:bg-green-600"
            onclick="handleClickCommencer()"
            >Commencer</a
          >
        </div>

        <!-- Menu burger -->
        <div class="flex items-center pr-4 md:hidden">
          <button id="burgerMenu" class="text-white focus:outline-none">
            <i class="fas fa-bars text-2xl"></i>
          </button>
        </div>
      </nav>

      <!-- Menu déroulant -->
      <nav
        id="mobileMenu"
        class="absolute left-0 top-16 z-40 flex hidden w-full flex-col items-start bg-black p-4 text-white md:hidden"
      >
        <a href="enseigner.html" class="w-full py-2">Enseigner</a>
        <a href="chat.html" class="w-full py-2">Chat</a>
        <a href="sac-secouriste.html" class="w-full py-2"
          >Mon sac de secouriste</a
        >
        <a href="#" onclick="handleClickConnexion()">Connexion</a>
        <a href="#" onclick="handleClickCommencer()" class="w-full py-2"
          >Commencer</a
        >
      </nav>
    </header>

    <!-- Bannière promotionnelle -->
    <div class="promo-banner">
      <div class="promo-banner-content">
        <h2>🎉 Offres Spéciales d'Été!</h2>
        <p>-15% sur tout le site avec le code <strong>SECOURS15</strong></p>
        <div class="countdown" id="countdown">23:59:59</div>
      </div>
    </div>

    <!-- Filtres -->
    <div class="filters">
      <div class="search-container">
        <i class="fas fa-search search-icon"></i>
        <input
          type="text"
          class="search-input"
          placeholder="Rechercher un produit..."
        />
      </div>

      <div class="filter-buttons">
        <button class="filter-btn active" data-category="all">
          Tous les produits
        </button>
        <button class="filter-btn" data-category="defibrillateurs">
          Défibrillateurs
        </button>
        <button class="filter-btn" data-category="premiers-soins">
          Premiers Soins
        </button>
        <button class="filter-btn" data-category="formation">Formation</button>
        <button class="filter-btn" data-category="urgence">Urgence</button>
      </div>
    </div>

    <!-- Grille de produits -->
    <div class="products-grid" id="productsGrid">
      <!-- Produit 1 -->
      <div class="product-card" data-category="defibrillateurs">
        <span class="product-badge">-20%</span>

        <div class="product-image">
          <img
            src="/api/placeholder/400/300"
            alt="Défibrillateur automatique Pro"
          />
        </div>

        <div class="product-content">
          <h3 class="product-title">Défibrillateur automatique Pro</h3>

          <div class="product-rating">
            <i class="fas fa-star star"></i>
            <i class="fas fa-star star"></i>
            <i class="fas fa-star star"></i>
            <i class="fas fa-star star"></i>
            <i class="fas fa-star-half-alt star"></i>
            <span>(128)</span>
          </div>

          <p>Défibrillateur automatique dernière génération avec guide vocal</p>

          <div class="product-price">
            <span class="current-price">1299€</span>
            <span class="old-price">1599€</span>
          </div>

          <div class="product-actions">
            <button class="btn btn-primary" onclick="addToCart(1)">
              <i class="fas fa-shopping-cart"></i>
              Ajouter au panier
            </button>
            <button class="btn btn-secondary" onclick="openQuickView(1)">
              <i class="fas fa-eye"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Produit 2 -->
      <div class="product-card" data-category="premiers-soins">
        <span class="product-badge">-15%</span>

        <div class="product-image">
          <img
            src="/api/placeholder/400/300"
            alt="Kit de premiers secours Pro"
          />
        </div>

        <div class="product-content">
          <h3 class="product-title">Kit de premiers secours Pro</h3>

          <div class="product-rating">
            <i class="fas fa-star star"></i>
            <i class="fas fa-star star"></i>
            <i class="fas fa-star star"></i>
            <i class="fas fa-star star"></i>
            <i class="fas fa-star star"></i>
            <span>(89)</span>
          </div>

          <p>Kit complet avec plus de 150 éléments essentiels</p>

          <div class="product-price">
            <span class="current-price">199€</span>
            <span class="old-price">234€</span>
          </div>

          <div class="product-actions">
            <button class="btn btn-primary" onclick="addToCart(2)">
              <i class="fas fa-shopping-cart"></i>
              Ajouter au panier
            </button>
            <button class="btn btn-secondary" onclick="openQuickView(2)">
              <i class="fas fa-eye"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Produit 3 -->
      <div class="product-card" data-category="urgence">
        <div class="product-image">
          <img
            src="/api/placeholder/400/300"
            alt="Kit Oxygénothérapie Complet"
          />
        </div>

        <div class="product-content">
          <h3 class="product-title">Kit Oxygénothérapie Complet</h3>

          <div class="product-rating">
            <i class="fas fa-star star"></i>
            <i class="fas fa-star star"></i>
            <i class="fas fa-star star"></i>
            <i class="fas fa-star star"></i>
            <i class="fas fa-star-half-alt star"></i>
            <span>(34)</span>
          </div>

          <p>Kit complet avec bouteille 5L et accessoires</p>

          <div class="product-price">
            <span class="current-price">599€</span>
          </div>

          <div class="product-actions">
            <button class="btn btn-primary" onclick="addToCart(3)">
              <i class="fas fa-shopping-cart"></i>
              Ajouter au panier
            </button>
            <button class="btn btn-secondary" onclick="openQuickView(3)">
              <i class="fas fa-eye"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Produit 4 -->
      <div class="product-card" data-category="formation">
        <span class="product-badge">-20%</span>

        <div class="product-image">
          <img src="/api/placeholder/400/300" alt="Pack Formation Complet" />
        </div>

        <div class="product-content">
          <h3 class="product-title">Pack Formation Complet</h3>

          <div class="product-rating">
            <i class="fas fa-star star"></i>
            <i class="fas fa-star star"></i>
            <i class="fas fa-star star"></i>
            <i class="fas fa-star star"></i>
            <i class="fas fa-star star"></i>
            <span>(78)</span>
          </div>

          <p>Pack complet avec mannequin, DEA formation et matériel</p>

          <div class="product-price">
            <span class="current-price">1499€</span>
            <span class="old-price">1899€</span>
          </div>

          <div class="product-actions">
            <button class="btn btn-primary" onclick="addToCart(4)">
              <i class="fas fa-shopping-cart"></i>
              Ajouter au panier
            </button>
            <button class="btn btn-secondary" onclick="openQuickView(4)">
              <i class="fas fa-eye"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick View Modal -->
    <div class="modal" id="quickViewModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalTitle"></h2>
          <button class="modal-close" id="modalClose">&times;</button>
        </div>
        <div class="modal-body" id="modalBody"></div>
      </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>
    <!-- Bouton panier avec badge -->
    <div class="cart-button-fixed">
      <button class="btn btn-primary cart-btn" onclick="toggleCart()">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-badge">0</span>
      </button>
    </div>

    <!-- Sidebar panier -->
    <div class="cart-sidebar" id="cartSidebar">
      <div class="cart-header">
        <h2>Panier</h2>
        <button class="btn-close" onclick="toggleCart()">&times;</button>
      </div>

      <div class="cart-items" id="cartItems">
        <!-- Les articles seront ajoutés ici dynamiquement -->
      </div>

      <div class="cart-footer">
        <div class="cart-total">
          <span>Total:</span>
          <span id="cartTotal">0€</span>
        </div>
        <button class="btn btn-primary btn-checkout" onclick="checkout()">
          Passer la commande
        </button>
      </div>
    </div>

    <script>
      // Configuration des produits
      const products = [
        {
          id: 1,
          name: "Défibrillateur automatique Pro",
          price: 1299,
          oldPrice: 1599,
          description:
            "Défibrillateur automatique dernière génération avec guide vocal",
          category: "defibrillateurs",
          image: "/api/placeholder/400/300",
          rating: 4.5,
          reviews: 128,
          features: [
            "Guide vocal en français",
            "Batterie longue durée",
            "Électrodes pré-connectées",
            "Maintenance automatique",
            "Garantie 8 ans",
          ],
        },
        {
          id: 2,
          name: "Kit de premiers secours Pro",
          price: 199,
          oldPrice: 234,
          description: "Kit complet avec plus de 150 éléments essentiels",
          category: "premiers-soins",
          image: "/api/placeholder/400/300",
          rating: 5,
          reviews: 89,
          features: [
            "150 éléments essentiels",
            "Sac résistant et étanche",
            "Organisation optimisée",
            "Adapté usage professionnel",
            "Conforme normes CE",
          ],
        },
        {
          id: 3,
          name: "Kit Oxygénothérapie Complet",
          price: 599,
          oldPrice: null,
          description: "Kit complet avec bouteille 5L et accessoires",
          category: "urgence",
          image: "/api/placeholder/400/300",
          rating: 4.5,
          reviews: 34,
          features: [
            "Bouteille 5L certifiée",
            "Manomètre haute précision",
            "Kit masques toutes tailles",
            "Sacoche de transport",
            "Formation incluse",
          ],
        },
        {
          id: 4,
          name: "Pack Formation Complet",
          price: 1499,
          oldPrice: 1899,
          description: "Pack complet avec mannequin, DEA formation et matériel",
          category: "formation",
          image: "/api/placeholder/400/300",
          rating: 5,
          reviews: 78,
          features: [
            "Mannequin adulte et enfant",
            "DEA de formation",
            "Matériel pédagogique",
            "Supports de cours",
            "Mallette de transport",
          ],
        },
      ];

      // Initialisation du menu mobile
      function initializeMobileMenu() {
        const mobileMenuBtn = document.getElementById("mobileMenuBtn");
        const mobileMenu = document.getElementById("mobileMenu");

        mobileMenuBtn?.addEventListener("click", () => {
          mobileMenu?.classList.toggle("active");
        });
      }

      // Gestion du compte à rebours
      function initializeCountdown() {
        const countdownElement = document.getElementById("countdown");

        function updateCountdown() {
          const now = new Date();
          const endOfDay = new Date();
          endOfDay.setHours(23, 59, 59);

          const diff = endOfDay - now;
          const hours = Math.floor(diff / (1000 * 60 * 60));
          const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
          const seconds = Math.floor((diff % (1000 * 60)) / 1000);

          if (countdownElement) {
            countdownElement.textContent = `${String(hours).padStart(
              2,
              "0"
            )}:${String(minutes).padStart(2, "0")}:${String(seconds).padStart(
              2,
              "0"
            )}`;
          }
        }

        updateCountdown();
        setInterval(updateCountdown, 1000);
      }

      // Gestion des filtres
      function initializeFilters() {
        const filterButtons = document.querySelectorAll(".filter-btn");
        const productCards = document.querySelectorAll(".product-card");

        filterButtons.forEach((button) => {
          button.addEventListener("click", () => {
            filterButtons.forEach((btn) => btn.classList.remove("active"));
            button.classList.add("active");

            const category = button.dataset.category;

            productCards.forEach((card) => {
              if (category === "all" || card.dataset.category === category) {
                card.style.display = "block";
              } else {
                card.style.display = "none";
              }
            });
          });
        });
      }

      // Gestion de la recherche
      function initializeSearch() {
        const searchInput = document.querySelector(".search-input");

        searchInput?.addEventListener("input", (e) => {
          const searchTerm = e.target.value.toLowerCase();
          const productCards = document.querySelectorAll(".product-card");

          productCards.forEach((card) => {
            const productTitle = card
              .querySelector(".product-title")
              .textContent.toLowerCase();
            const productDescription = card
              .querySelector("p")
              .textContent.toLowerCase();

            if (
              productTitle.includes(searchTerm) ||
              productDescription.includes(searchTerm)
            ) {
              card.style.display = "block";
            } else {
              card.style.display = "none";
            }
          });
        });
      }

      // Gestion du panier
      let cart = [];

      function initializeCart() {
        cart = JSON.parse(localStorage.getItem("cart") || "[]");
        updateCartBadge();
      }

      function addToCart(productId) {
        const product = products.find((p) => p.id === productId);
        if (!product) return;

        cart.push({
          ...product,
          quantity: 1,
          timestamp: Date.now(),
        });

        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartBadge();
        showToast(`${product.name} ajouté au panier`);
      }

      function updateCartBadge() {
        const badge = document.querySelector(".cart-badge");
        if (badge) {
          badge.textContent = cart.length;
          badge.style.display = cart.length > 0 ? "block" : "none";
        }
      }

      // Gestion du modal Quick View
      function initializeQuickView() {
        const modal = document.getElementById("quickViewModal");
        const closeBtn = document.getElementById("modalClose");

        closeBtn?.addEventListener("click", () => {
          modal?.classList.remove("active");
        });

        window.addEventListener("click", (e) => {
          if (e.target === modal) {
            modal.classList.remove("active");
          }
        });
      }

      function openQuickView(productId) {
        const product = products.find((p) => p.id === productId);
        if (!product) return;

        const modal = document.getElementById("quickViewModal");
        const modalTitle = document.getElementById("modalTitle");
        const modalBody = document.getElementById("modalBody");

        if (!modal || !modalTitle || !modalBody) return;

        modalTitle.textContent = product.name;

        modalBody.innerHTML = `
        <div class="modal-image">
          <img src="${product.image}" alt="${
          product.name
        }" style="width: 100%; border-radius: var(--radius);">
        </div>
        <div class="modal-info">
          <div class="product-rating">
            ${generateStars(product.rating)}
            <span>(${product.reviews} avis)</span>
          </div>
          
          <div class="product-price" style="margin: 1rem 0;">
            <span class="current-price">${product.price}€</span>
            ${
              product.oldPrice
                ? `<span class="old-price">${product.oldPrice}€</span>`
                : ""
            }
          </div>
          
          <p style="margin: 1rem 0;">${product.description}</p>
          
          <h3>Caractéristiques:</h3>
          <ul style="margin: 1rem 0; padding-left: 1.5rem;">
            ${product.features.map((feature) => `<li>${feature}</li>`).join("")}
          </ul>
          
          <div class="product-actions" style="margin-top: 2rem;">
            <button class="btn btn-primary" onclick="addToCart(${product.id})">
              <i class="fas fa-shopping-cart"></i>
              Ajouter au panier
            </button>
          </div>
        </div>
      `;

        modal.classList.add("active");
      }

      // Génération des étoiles
      function generateStars(rating) {
        const fullStars = Math.floor(rating);
        const hasHalfStar = rating % 1 !== 0;
        const stars = [];

        for (let i = 0; i < 5; i++) {
          if (i < fullStars) {
            stars.push('<i class="fas fa-star star"></i>');
          } else if (hasHalfStar && i === fullStars) {
            stars.push('<i class="fas fa-star-half-alt star"></i>');
          } else {
            stars.push('<i class="far fa-star star"></i>');
          }
        }

        return stars.join("");
      }

      // Notifications Toast
      function showToast(message, type = "success") {
        const toastContainer = document.getElementById("toastContainer");
        if (!toastContainer) return;

        const toast = document.createElement("div");
        toast.className = "toast";
        toast.innerHTML = `
        <i class="fas fa-${
          type === "success" ? "check-circle" : "info-circle"
        }" style="color: var(--${
          type === "success" ? "success" : "primary"
        });"></i>
        <span>${message}</span>
      `;

        toastContainer.appendChild(toast);

        setTimeout(() => {
          toast.classList.add("show");
        }, 100);

        setTimeout(() => {
          toast.classList.remove("show");
          setTimeout(() => toast.remove(), 300);
        }, 3000);
      }
      function toggleCart() {
        const sidebar = document.getElementById("cartSidebar");
        sidebar.classList.toggle("active");
      }

      function updateCartDisplay() {
        const cartItems = document.getElementById("cartItems");
        const cartTotal = document.getElementById("cartTotal");
        const badge = document.querySelector(".cart-badge");

        // Mise à jour du badge
        badge.textContent = cart.length;
        badge.style.display = cart.length > 0 ? "flex" : "none";

        // Mise à jour des articles
        cartItems.innerHTML = cart
          .map(
            (item) => `
    <div class="cart-item">
      <div class="cart-item-image">
        <img src="${item.image}" alt="${item.name}">
      </div>
      <div class="cart-item-info">
        <span class="cart-item-title">${item.name}</span>
        <span class="cart-item-price">${item.price}€</span>
        <div class="cart-item-quantity">
          <button class="btn" onclick="updateQuantity(${item.id}, -1)">-</button>
          <span>${item.quantity}</span>
          <button class="btn" onclick="updateQuantity(${item.id}, 1)">+</button>
        </div>
      </div>
      <div class="cart-item-remove" onclick="removeFromCart(${item.id})">
        <i class="fas fa-trash"></i>
      </div>
    </div>
  `
          )
          .join("");

        // Mise à jour du total
        const total = cart.reduce(
          (sum, item) => sum + item.price * item.quantity,
          0
        );
        cartTotal.textContent = `${total}€`;
      }

      function addToCart(productId) {
        const product = products.find((p) => p.id === productId);
        if (!product) return;

        const existingItem = cart.find((item) => item.id === productId);

        if (existingItem) {
          existingItem.quantity += 1;
        } else {
          cart.push({
            ...product,
            quantity: 1,
            timestamp: Date.now(),
          });
        }

        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartDisplay();
        showToast(`${product.name} ajouté au panier`);
      }

      function updateQuantity(productId, change) {
        const item = cart.find((item) => item.id === productId);
        if (!item) return;

        item.quantity += change;

        if (item.quantity <= 0) {
          removeFromCart(productId);
          return;
        }

        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartDisplay();
      }

      function removeFromCart(productId) {
        cart = cart.filter((item) => item.id !== productId);
        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartDisplay();
        showToast("Article retiré du panier");
      }

      function checkout() {
        if (cart.length === 0) {
          showToast("Votre panier est vide", "error");
          return;
        }

        // Ici vous pouvez ajouter la logique de paiement
        showToast("Redirection vers le paiement...", "info");
      }

      // Modifiez la fonction d'initialisation
      function initializeCart() {
        cart = JSON.parse(localStorage.getItem("cart") || "[]");
        updateCartDisplay();
      }

      // Initialisation
      document.addEventListener("DOMContentLoaded", () => {
        initializeMobileMenu();
        initializeCountdown();
        initializeFilters();
        initializeSearch();
        initializeCart();
        initializeQuickView();
      });
    </script>
  </body>
</html>
