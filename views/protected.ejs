<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page Principale</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .parent {
            display: grid;
            grid-template-columns: repeat(2, 0.75fr) repeat(8, 1fr) repeat(2, 0.75fr);
            grid-template-rows: repeat(12, 1fr);
            grid-column-gap: 0px;
            grid-row-gap: 0px;
        }
        .div1 { grid-area: 1 / 1 / 2 / 3; }
        .div2 { grid-area: 1 / 3 / 2 / 9; }
        .div3 { grid-area: 1 / 9 / 2 / 13; }
        .div4 { grid-area: 2 / 3 / 3 / 11; }
        .div5 { grid-area: 2 / 1 / 4 / 3; }
        .div6 { grid-area: 4 / 1 / 11 / 3; }
        .div7 { grid-area: 11 / 1 / 13 / 3; }
        .div8 { grid-area: 2 / 11 / 9 / 13; }
        .div9 { grid-area: 9 / 11 / 11 / 13; }
        .div10 { grid-area: 11 / 11 / 13 / 13; }
        .div11 { grid-area: 12 / 3 / 13 / 11; }
        .div12 { grid-area: 2 / 3 / 12 / 11; }

        /* Masquer les barres de défilement */
        body::-webkit-scrollbar,
        #mainContent::-webkit-scrollbar,
        .div6::-webkit-scrollbar {
            display: none; /* pour Chrome, Safari, et Opera */
        }

        body {
            scrollbar-width: none; /* pour Firefox */
        }

        body,
        #mainContent,
        .div6 {
            -ms-overflow-style: none; /* pour IE et Edge */
        }

        #navbarHidden {
            transition: opacity 0.3s ease-in-out;
        }

        #navbarHidden.hidden {
            opacity: 0;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-900">

    <div class="parent h-screen">
        <!-- Div1 - Logo -->
        <div class="div1 bg-gray-800 flex justify-center border border-gray-700 h-full">
            <%- include('partials/logoSite') %>
        </div>

        <!-- Div2 - Navbar -->
        <div class="div2 bg-gray-800 border border-gray-700 h-full">
            <%- include('partials/navbar') %>
        </div>

        <!-- Div3 - Logbar -->
        <div class="div3 bg-gray-800 text-white flex items-center justify-center border border-gray-700 h-full">
            <%- include('partials/logbar', { user }) %>
            <!-- Bouton pour masquer les divs -->
            <button id="toggleButton" class="ml-2 text-white bg-blue-500 p-2 rounded">
                &#x1F5D8; <!-- Icône (une croix) -->
            </button>
        </div>

        <!-- Div4 - Navbar Hidden -->
        <div id="navbarHidden" class="div4 z-50 border border-gray-700 h-full">
            <%- include('partials/navbarHidden') %>
        </div>

        <!-- Div5 - Lesson Online -->
        <div class="div5 bg-gray-800 border border-gray-700 h-full">
            <%- include('partials/lessonOnLine') %>
        </div>

        <!-- Div6 - Chapter List -->
        <div class="div6 bg-gray-800 border border-gray-700 h-full">
            <%- include('partials/chapterList') %>
        </div>

        <!-- Div7 - Dashboard -->
        <div class="div7 bg-gray-800 border border-gray-700 h-full">
            <%- include('partials/dashboarddiv') %>
        </div>

        <!-- Div8 - Connected Users -->
        <div class="div8 bg-gray-800 border border-gray-700 h-full">
            <%- include('partials/connectedList') %>
        </div>

        <!-- Div9 - Referentials -->
        <div class="div9 bg-gray-800 border border-gray-700 h-full">
            <%- include('partials/referentiels') %>
        </div>

        <!-- Div10 - Contact -->
        <div class="div10 bg-gray-800 border border-gray-700 h-full">
            <%- include('partials/contact') %>
        </div>

        <!-- Div11 - Input GPT -->
        <div class="div11 bg-gray-800 border border-gray-700 h-full">
            <%- include('partials/inputgpt') %>
        </div>

        <!-- Div12 - Main Content -->
        <div id="mainContent" class="div12 border border-gray-700 overflow-y-auto h-full">
            <%- include('partials/contenus') %>
        </div>
    </div>

    <script>
        // Script pour contrôler la visibilité des divs 5 à 10
        let areDivsHidden = false;

        document.getElementById('toggleButton').addEventListener('click', () => {
            const divsToToggle = [
                document.querySelector('.div5'), 
                document.querySelector('.div6'), 
                document.querySelector('.div7'), 
                document.querySelector('.div8'), 
                document.querySelector('.div9'), 
                document.querySelector('.div10')
            ];

            areDivsHidden = !areDivsHidden;

            divsToToggle.forEach(div => {
                if (areDivsHidden) {
                    div.style.display = 'none'; // Masquer les divs
                } else {
                    div.style.display = 'block'; // Réafficher les divs
                }
            });

            // Ajustement des divs restantes
            const hiddenBar = document.getElementById('navbarHidden');
            const mainContent = document.getElementById('mainContent');
            const inputGptDiv = document.querySelector('.div11');

            if (areDivsHidden) {
                hiddenBar.style.gridColumnStart = '1';
                hiddenBar.style.gridColumnEnd = '13'; // Prendre toute la largeur
                mainContent.style.gridColumnStart = '1';
                mainContent.style.gridColumnEnd = '13'; // Prendre toute la largeur
                inputGptDiv.style.gridColumnStart = '1';
                inputGptDiv.style.gridColumnEnd = '13'; // Prendre toute la largeur
            } else {
                hiddenBar.style.gridColumnStart = '3';
                hiddenBar.style.gridColumnEnd = '11'; // Rétablir l'état
                mainContent.style.gridColumnStart = '3';
                mainContent.style.gridColumnEnd = '11'; // Rétablir l'état
                inputGptDiv.style.gridColumnStart = '3';
                inputGptDiv.style.gridColumnEnd = '11'; // Rétablir l'état
            }
        });

        // Script modifié pour contrôler la visibilité de navbarHidden
        let lastScrollTop = 0;
        const navbar = document.getElementById('navbarHidden');
        const mainContent = document.getElementById('mainContent');

        mainContent.addEventListener('scroll', () => {
            let scrollTop = mainContent.scrollTop;

            if (scrollTop > lastScrollTop) {
                // Scrolling down
                navbar.classList.add('hidden');
            } else {
                // Scrolling up
                navbar.classList.remove('hidden');
            }

            lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
        }, false);
    </script>
</body>
</html>
